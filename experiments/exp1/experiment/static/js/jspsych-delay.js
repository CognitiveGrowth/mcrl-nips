// Generated by CoffeeScript 1.12.3
jsPsych.plugins['delay'] = (function() {
  var plugin;
  plugin = {
    trial: function(display_element, trial_config) {
      var $timer, complete, duration, hours, minutes, seconds, start, tick;
      display_element.empty();
      trial_config = jsPsych.pluginAPI.evaluateFunctionParameters(trial_config);
      duration = trial_config.duration;
      display_element.append(markdown("# Break\n\nFeel free to do whatever you'd like until the timer completes.\nNote that you still have to complete the entire HIT in one hour,\nso don't stay away too long!"));
      $timer = $('<div>', {
        "class": 'timer'
      }).appendTo(display_element);
      $timer.html('HELLO');
      start = getTime();
      seconds = 5;
      minutes = 0;
      hours = 0;
      complete = function() {
        return display_element.append($('<button>')).addClass('btn btn-primary btn-lg').text('Continue').click((function() {
          display_element.empty();
          return jsPsych.finishTrial({
            rt: (getTime()) - start
          });
        }));
      };
      tick = function() {
        seconds--;
        if (seconds < 0) {
          seconds = 59;
          minutes--;
          if (minutes < 0) {
            minutes = 59;
            hours--;
            if (hours < 0) {
              complete();
              return;
            }
          }
        }
        console.log('here');
        $timer.html((hours ? (hours > 9 ? hours : '0' + hours) : '00') + ':' + (minutes ? (minutes > 9 ? minutes : '0' + minutes) : '00') + ':' + (seconds > 9 ? seconds : '0' + seconds));
        return setTimeout(tick, 1000);
      };
      return tick();
    }
  };
  return plugin;
})();
